// GEYASS Web Widget - Run Python markdown in browser (<250 tokens)
class GeyassRunner{constructor(t){this.target=t;this.pyodide=null;this.loading=false}async init(){if(this.pyodide)return;this.loading=true;this.pyodide=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.24.1/full/"});this.loading=false}async run(e){await this.init();const t=await fetch(e).then(r=>r.text()),n=t.match(/```python\n([\s\S]*?)```/);if(!n)throw"No Python code found";const o=document.querySelector(this.target),s=document.createElement("div");s.className="output";o.appendChild(s);try{this.pyodide.setStdout({batched:t=>s.innerHTML+=t+"<br>"}),await this.pyodide.runPythonAsync(n[1]),s.innerHTML+="<br>✓ Done"}catch(t){s.innerHTML+=`<br>✗ Error: ${t}`,s.style.color="#f00"}}render(e,t){const n=document.querySelector(this.target),o=document.createElement("button");o.textContent=t||"▶ Run",o.onclick=()=>this.run(e),n.appendChild(o)}}
